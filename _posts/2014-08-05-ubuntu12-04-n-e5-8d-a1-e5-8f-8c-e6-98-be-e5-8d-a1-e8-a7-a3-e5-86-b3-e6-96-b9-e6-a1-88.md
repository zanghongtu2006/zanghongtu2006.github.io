---
title: "Ubuntu12.04 N卡双显卡解决方案"
date: "2014-08-05 17:25:50"
slug: "ubuntu12-04-n-e5-8d-a1-e5-8f-8c-e6-98-be-e5-8d-a1-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88"
layout: "post"
categories: ["Ubuntu"]
tags: ["Ubuntu", "双网卡"]
---
一直很喜欢ubuntu，从ubuntu9.10一直用到现在的12.04，但是现在笔记本的配置如果是intel的i系列的cpu自带了核心显卡，加上独显就是双显卡。
当你美滋滋的装好了ubuntu之后，习惯性的用自带的驱动检测工具给装上显卡驱动，以为大功告成的时候，肯跌的事情来了，当你重启你会发现，黑屏！！！！！！！！！！！木有错，你进不去X桌面了，这就是双显卡的悲剧，咋办捏？就这样放弃么，肿么可能，用linux就必修经得起折腾，于是上网狂找资料，发现一个第三方的玩意貌似可以解决，叫Bumblebee(大黄蜂)，Nvidia的双显卡切换叫Optimus（擎天柱），还有一个双显卡切换的软件ironhide（铁皮）。大黄蜂是唯一完美解决的，废话不扯，入正题 = =》
第一步：安装我们的主角Bumblebee(大黄蜂)
sudoadd-apt-repository ppa:bumblebee/stable
sudo apt-get update
sudo apt-get install bumblebee bumblebee-nvidia
sudo reboot
ps: Bumblebee3已经非常完善，把所有的东西都配置好了
第二步：查看显卡工作状态
lspci |grep VGA
结果如下：
00:02.0 VGAcompatible controller: Intel Corporation 2nd Generation CoreProcessor Family Integrated Graphics Controller (rev 09)
01:00.0 VGA compatible controller: NVIDIA Corporation GF108[GeForce GT 540M] (rev ff)
独显的状态为rev ff 即为关闭状态，OK 大功告成！
--------------------------下面非必需，也许要装拓展才能运行下面的命令--------------------------------------------------
打开N卡设置
optirunnvidia-settings -c :8
下边两个命令可以对比开独显跟不开独显的性能差距
glxgears // 直接运行
optirunglxgears //使用独显运行
Ps：optirunXXX 就是调用独显的关键了，这个就是指明用独立显卡打开指定的xxx程序
gamma值和亮度：
xgamma -gamma.7 //调节gamma值为0.7。。。详细的请man xgamma
这个时候你会发现你的亮度，用Fn是不能调节的（是否觉得非常蛋疼捏 --）。因为fn调节的是/sys/class/backlight/acpi\_video0/brightness文件，而I卡的文件是/sys/class/backlight/intel\_backlight/brightness。
解决方法：
sudo su
echo 500 >/sys/class/backlight/intel\_backlight/brightness
另外在内核启动kernel后面加
acpi\_backlight=vendor
Ps:内核启动在哪捏？
grub2之前的文件是在： cat /boot/grub/menu.lst|grep acpi\_backlight 在内核后边加上即可 如下：
kernel /vmlinuz-linux-ckroot=/dev/disk/by-uuid/4b415fd1-9e54-40da-8d0c-d95a9be11fd3 roelevator=bfq acpi\_backlight=vendorvga=773
grub2的配置文件在/etc/default/grub里：用sudogedit /etc/default/grub 打开配置文件，找到GRUB\_CMDLINE\_LINUX=""这一行修改成GRUB\_CMDLINE\_LINUX="acpi\_backlight=vendor"保存重启就OK了
另外把gamma和亮度写入/etc/rc.local就能开机自动设定了，指令如下：
echo 'echo 500> /sys/class/backlight/intel\_backlight/brightness'>> /etc/rc.local
Ps：如果你已经存在/etc/X11/xorg.conf或者自己生成了，请删除x的配置文件
sudo rm/etc/X11/xorg.conf
原文地址：ubuntu12.04 N卡双显卡 解决方案作者：Code\_Ape
转载请注明出处： http://blog.sina.com.cn/s/blog\_6dee445401013sss.html
