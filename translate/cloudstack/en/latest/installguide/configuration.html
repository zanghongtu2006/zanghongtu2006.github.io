

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuring your CloudStack Installation &mdash; Apache CloudStack 4.13.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Host Hyper-V Installation" href="hypervisor/hyperv.html" />
    <link rel="prev" title="Management Server Installation" href="management-server/index.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="configuration.html" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "installguide/configuration"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Apache CloudStack
          

          
          </a>

          
            
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../conceptsandterminology/index.html">CloudStack Concepts and Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickinstallationguide/qig.html">Quick Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#building-from-source">Building from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#general-installation">General Installation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#configuration">Configuration</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="configuration.html#">Configuring your CloudStack Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#overview-of-provisioning-steps">Overview of Provisioning Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#adding-regions-optional">Adding Regions (optional)</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#adding-a-zone">Adding a Zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#adding-a-pod">Adding a Pod</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#adding-a-cluster">Adding a Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#adding-a-host">Adding a Host</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#add-primary-storage">Add Primary Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#add-secondary-storage">Add Secondary Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#initialize-and-test">Initialize and Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#configuration-parameters">Configuration Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="configuration.html#granular-global-configuration-parameters">Granular Global Configuration Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#hypervisor-setup">Hypervisor Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#optional-installation">Optional Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading/index.html">Upgrading CloudStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adminguide/index.html">Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developersguide/index.html">Developers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://cloudstack.apache.org/api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference external" href="https://cwiki.apache.org/confluence/display/CLOUDSTACK/Home">Apache CloudStack Wiki</a></li>
<li class="toctree-l1"><a class="reference external" href="http://cloudstack.apache.org/">Apache CloudStack web site</a></li>
<li class="toctree-l1"><a class="reference external" href="http://cloudstack.apache.org/downloads.html">Apache CloudStack Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apache/cloudstack">Apache CloudStack on GitHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Pre 4.11 Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../projects/cloudstack-installation">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../projects/cloudstack-administration">Administration Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../projects/cloudstack-release-notes">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Apache CloudStack</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Installation Guide</a> &raquo;</li>
        
      <li>Configuring your CloudStack Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/cloudstack-documentation/blob/4.13.0.0/source/installguide/configuration.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuring-your-cloudstack-installation">
<span id="id1"></span><h1>Configuring your CloudStack Installation<a class="headerlink" href="configuration.html#configuring-your-cloudstack-installation" title="Permalink to this headline">¶</a></h1>
<p>This section tells how to add regions, zones, pods, clusters, hosts,
storage, and networks to your cloud. If you are unfamiliar with these
entities, please begin by looking through <a class="reference internal" href="../conceptsandterminology/concepts.html#infrastructure-overview"><span class="std std-ref">Cloud Infrastructure Overview</span></a></p>
<div class="section" id="overview-of-provisioning-steps">
<h2>Overview of Provisioning Steps<a class="headerlink" href="configuration.html#overview-of-provisioning-steps" title="Permalink to this headline">¶</a></h2>
<p>After the Management Server is installed and running, you can add the
compute resources for it to manage. For an overview of how a CloudStack
cloud infrastructure is organized, see <a class="reference internal" href="../conceptsandterminology/concepts.html#infrastructure-overview"><span class="std std-ref">Cloud Infrastructure Overview</span></a></p>
<p>To provision the cloud infrastructure, or to scale it up at any time,
follow these procedures:</p>
<ol class="arabic simple">
<li>Define regions (optional). See <a class="reference internal" href="configuration.html#adding-regions"><span class="std std-ref">Adding Regions (optional)</span></a>.</li>
<li>Add a zone to the region. See <a class="reference internal" href="configuration.html#adding-a-zone"><span class="std std-ref">Adding a Zone</span></a>.</li>
<li>Add more pods to the zone (optional). See <a class="reference internal" href="configuration.html#adding-a-pod"><span class="std std-ref">Adding a Pod</span></a>.</li>
<li>Add more clusters to the pod (optional). See <a class="reference internal" href="configuration.html#adding-a-cluster"><span class="std std-ref">Adding a Cluster</span></a>.</li>
<li>Add more hosts to the cluster (optional). See <a class="reference internal" href="configuration.html#adding-a-host"><span class="std std-ref">Adding a Host</span></a>.</li>
<li>Add primary storage to the cluster. See <a class="reference internal" href="configuration.html#add-primary-storage"><span class="std std-ref">Add Primary Storage</span></a>.</li>
<li>Add secondary storage to the zone. See <a class="reference internal" href="configuration.html#add-secondary-storage"><span class="std std-ref">Add Secondary Storage</span></a>.</li>
<li>Initialize and test the new cloud. See <a class="reference internal" href="configuration.html#initialize-and-test"><span class="std std-ref">Initialize and Test</span></a>.</li>
</ol>
<p>When you have finished these steps, you will have a deployment with the
following basic structure:</p>
<p><img alt="provisioning-overview.png: Conceptual overview of a basic deployment" src="../_images/provisioning-overview.png" /></p>
</div>
<div class="section" id="adding-regions-optional">
<span id="adding-regions"></span><h2>Adding Regions (optional)<a class="headerlink" href="configuration.html#adding-regions-optional" title="Permalink to this headline">¶</a></h2>
<p>Grouping your cloud resources into geographic regions is an optional
step when provisioning the cloud. For an overview of regions, see <a class="reference internal" href="../conceptsandterminology/concepts.html#about-regions"><span class="std std-ref">About Regions</span></a></p>
<div class="section" id="the-first-region-the-default-region">
<h3>The First Region: The Default Region<a class="headerlink" href="configuration.html#the-first-region-the-default-region" title="Permalink to this headline">¶</a></h3>
<p>If you do not take action to define regions, then all the zones in your
cloud will be automatically grouped into a single default region. This
region is assigned the region ID of 1. You can change the name or URL of
the default region by displaying the region in the CloudStack UI and
clicking the Edit button.</p>
</div>
<div class="section" id="adding-a-region">
<h3>Adding a Region<a class="headerlink" href="configuration.html#adding-a-region" title="Permalink to this headline">¶</a></h3>
<p>Use these steps to add a second region in addition to the default
region.</p>
<ol class="arabic">
<li><p class="first">Each region has its own CloudStack instance. Therefore, the first
step of creating a new region is to install the Management Server
software, on one or more nodes, in the geographic area where you want
to set up the new region. Use the steps in the Installation guide.
When you come to the step where you set up the database, use the
additional command-line flag <code class="docutils literal notranslate"><span class="pre">-r</span> <span class="pre">&lt;region_id&gt;</span></code> to set a region ID
for the new region. The default region is automatically assigned a
region ID of 1, so your first additional region might be region 2.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># cloudstack-setup-databases cloud:&lt;dbpassword&gt;@localhost --deploy-as=root:&lt;password&gt; -e &lt;encryption_type&gt; -m &lt;management_server_key&gt; -k &lt;database_key&gt; -r &lt;region_id&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">By the end of the installation procedure, the Management Server
should have been started. Be sure that the Management Server
installation was successful and complete.</p>
</li>
<li><p class="first">Now add the new region to region 1 in CloudStack.</p>
<ol class="arabic simple">
<li>Log in to CloudStack in the first region as root administrator
(that is, log in to &lt;region.1.IP.address&gt;:8080/client).</li>
<li>In the left navigation bar, click Regions.</li>
<li>Click Add Region. In the dialog, fill in the following fields:<ul>
<li>ID. A unique identifying number. Use the same number you set in
the database during Management Server installation in the new
region; for example, 2.</li>
<li>Name. Give the new region a descriptive name.</li>
<li>Endpoint. The URL where you can log in to the Management Server
in the new region. This has the format
&lt;region.2.IP.address&gt;:8080/client.</li>
</ul>
</li>
</ol>
</li>
<li><p class="first">Now perform the same procedure in reverse. Log in to region 2, and
add region 1.</p>
</li>
<li><p class="first">Copy the account, user, and domain tables from the region 1 database
to the region 2 database.</p>
<p>In the following commands, it is assumed that you have set the root
password on the database, which is a CloudStack recommended best
practice. Substitute your own MySQL root password.</p>
<ol class="arabic">
<li><p class="first">First, run this command to copy the contents of the database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mysqldump -u root -p&lt;mysql_password&gt; -h &lt;region1_db_host&gt; cloud account user domain &gt; region1.sql</span>
</pre></div>
</div>
</li>
<li><p class="first">Then run this command to put the data onto the region 2 database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mysql -u root -p&lt;mysql_password&gt; -h &lt;region2_db_host&gt; cloud &lt; region1.sql</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Remove project accounts. Run these commands on the region 2 database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mysql&gt; delete from account where type = 5;</span>
</pre></div>
</div>
</li>
<li><p class="first">Set the default zone as null:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mysql&gt; update account set default_zone_id = null;</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart the Management Servers in region 2.</p>
</li>
</ol>
</div>
<div class="section" id="adding-third-and-subsequent-regions">
<h3>Adding Third and Subsequent Regions<a class="headerlink" href="configuration.html#adding-third-and-subsequent-regions" title="Permalink to this headline">¶</a></h3>
<p>To add the third region, and subsequent additional regions, the steps
are similar to those for adding the second region. However, you must
repeat certain steps additional times for each additional region:</p>
<ol class="arabic">
<li><p class="first">Install CloudStack in each additional region. Set the region ID for
each region during the database setup step.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cloudstack</span><span class="o">-</span><span class="n">setup</span><span class="o">-</span><span class="n">databases</span> <span class="n">cloud</span><span class="p">:</span><span class="o">&lt;</span><span class="n">dbpassword</span><span class="o">&gt;</span><span class="nd">@localhost</span> <span class="o">--</span><span class="n">deploy</span><span class="o">-</span><span class="k">as</span><span class="o">=</span><span class="n">root</span><span class="p">:</span><span class="o">&lt;</span><span class="n">password</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">e</span> <span class="o">&lt;</span><span class="n">encryption_type</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">m</span> <span class="o">&lt;</span><span class="n">management_server_key</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">k</span> <span class="o">&lt;</span><span class="n">database_key</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">r</span> <span class="o">&lt;</span><span class="n">region_id</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">Once the Management Server is running, add your new region to all
existing regions by repeatedly using the Add Region button in the UI.
For example, if you were adding region 3:</p>
<ol class="arabic simple">
<li>Log in to CloudStack in the first region as root administrator
(that is, log in to &lt;region.1.IP.address&gt;:8080/client), and add a
region with ID 3, the name of region 3, and the endpoint
&lt;region.3.IP.address&gt;:8080/client.</li>
<li>Log in to CloudStack in the second region as root administrator
(that is, log in to &lt;region.2.IP.address&gt;:8080/client), and add a
region with ID 3, the name of region 3, and the endpoint
&lt;region.3.IP.address&gt;:8080/client.</li>
</ol>
</li>
<li><p class="first">Repeat the procedure in reverse to add all existing regions to the
new region. For example, for the third region, add the other two
existing regions:</p>
<ol class="arabic simple">
<li>Log in to CloudStack in the third region as root administrator
(that is, log in to &lt;region.3.IP.address&gt;:8080/client).</li>
<li>Add a region with ID 1, the name of region 1, and the endpoint
&lt;region.1.IP.address&gt;:8080/client.</li>
<li>Add a region with ID 2, the name of region 2, and the endpoint
&lt;region.2.IP.address&gt;:8080/client.</li>
</ol>
</li>
<li><p class="first">Copy the account, user, and domain tables from any existing region’s
database to the new region’s database.</p>
<p>In the following commands, it is assumed that you have set the root
password on the database, which is a CloudStack recommended best
practice. Substitute your own MySQL root password.</p>
<ol class="arabic">
<li><p class="first">First, run this command to copy the contents of the database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mysqldump -u root -p&lt;mysql_password&gt; -h &lt;region1_db_host&gt; cloud account user domain &gt; region1.sql</span>
</pre></div>
</div>
</li>
<li><p class="first">Then run this command to put the data onto the new region’s
database. For example, for region 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># mysql -u root -p&lt;mysql_password&gt; -h &lt;region3_db_host&gt; cloud &lt; region1.sql</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Remove project accounts. Run these commands on the region 3 database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">delete</span> <span class="kn">from</span> <span class="nn">account</span> <span class="n">where</span> <span class="nb">type</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first">Set the default zone as null:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span><span class="o">&gt;</span> <span class="n">update</span> <span class="n">account</span> <span class="nb">set</span> <span class="n">default_zone_id</span> <span class="o">=</span> <span class="n">null</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart the Management Servers in the new region.</p>
</li>
</ol>
</div>
<div class="section" id="deleting-a-region">
<h3>Deleting a Region<a class="headerlink" href="configuration.html#deleting-a-region" title="Permalink to this headline">¶</a></h3>
<p>Log in to each of the other regions, navigate to the one you want to
delete, and click Remove Region. For example, to remove the third region
in a 3-region cloud:</p>
<ol class="arabic simple">
<li>Log in to &lt;region.1.IP.address&gt;:8080/client.</li>
<li>In the left navigation bar, click Regions.</li>
<li>Click the name of the region you want to delete.</li>
<li>Click the Remove Region button.</li>
<li>Repeat these steps for &lt;region.2.IP.address&gt;:8080/client.</li>
</ol>
</div>
</div>
<div class="section" id="adding-a-zone">
<span id="id2"></span><h2>Adding a Zone<a class="headerlink" href="configuration.html#adding-a-zone" title="Permalink to this headline">¶</a></h2>
<p>When you add a new zone, you will be prompted to configure the zone’s
physical network and add the first pod, cluster, host, primary storage,
and secondary storage.</p>
<ol class="arabic simple">
<li>Log in to the CloudStack UI as the root administrator. See <a class="reference internal" href="../adminguide/ui.html#log-in-to-ui"><span class="std std-ref">Log In to the UI</span></a>.</li>
<li>In the left navigation, choose Infrastructure.</li>
<li>On Zones, click View More.</li>
<li>Click Add Zone. The zone creation wizard will appear.</li>
<li>Choose one of the following network types:<ul>
<li><strong>Basic.</strong> For AWS-style networking. Provides a single network
where each VM instance is assigned an IP directly from the
network. Guest isolation can be provided through layer-3 means
such as security groups (IP address source filtering).</li>
<li><strong>Advanced.</strong> For more sophisticated network topologies. This
network model provides the most flexibility in defining guest
networks and providing custom network offerings such as firewall,
VPN, or load balancer support.</li>
</ul>
</li>
<li>The rest of the steps differ depending on whether you chose Basic or
Advanced. Continue with the steps that apply to you:<ul>
<li><a class="reference external" href="configuration.html#basic-zone-configuration">“Basic Zone Configuration”</a></li>
<li><a class="reference external" href="configuration.html#advanced-zone-configuration">“Advanced Zone Configuration”</a></li>
</ul>
</li>
</ol>
<div class="section" id="id3">
<h3>Basic Zone Configuration<a class="headerlink" href="configuration.html#id3" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">After you select Basic in the Add Zone wizard and click Next, you
will be asked to enter the following details. Then click Next.</p>
<ul>
<li><p class="first"><strong>Name.</strong> A name for the zone.</p>
</li>
<li><p class="first"><strong>DNS 1 and 2.</strong> These are DNS servers for use by guest VMs in the
zone. These DNS servers will be accessed via the public network
you will add later. The public IP addresses for the zone must have
a route to the DNS server named here.</p>
</li>
<li><p class="first"><strong>Internal DNS 1 and Internal DNS 2.</strong> These are DNS servers for
use by system VMs in the zone (these are VMs used by CloudStack
itself, such as virtual routers, console proxies, and Secondary
Storage VMs.) These DNS servers will be accessed via the
management traffic network interface of the System VMs. The
private IP address you provide for the pods must have a route to
the internal DNS server named here.</p>
</li>
<li><p class="first"><strong>Hypervisor.</strong> (Introduced in version 3.0.1) Choose the
hypervisor for the first cluster in the zone. You can add clusters
with different hypervisors later, after you finish adding the
zone.</p>
</li>
<li><p class="first"><strong>Network Offering.</strong> Your choice here determines what network
services will be available on the network for guest VMs.</p>
<table border="1" class="table-striped table-bordered table-hover docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Network Offering</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DefaultSharedNetworkOfferingWithSGService</td>
<td>If you want to enable security groups for guest traffic isolation, choose this. (See Using Security Groups to                                                              Control Traffic to VMs.)</td>
</tr>
<tr class="row-odd"><td>DefaultSharedNetworkOffering</td>
<td>If you do not need security groups, choose this.</td>
</tr>
<tr class="row-even"><td>DefaultSharedNetscalerEIPandELBNetworkOffering</td>
<td>If you have installed a Citrix NetScaler appliance as part of your zone network, and you will be using its Elastic                                                         IP and Elastic Load Balancing features, choose this. With the EIP and ELB features, a basic zone with security                                                             groups enabled can offer 1:1 static NAT and load balancing.</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><strong>Network Domain.</strong> (Optional) If you want to assign a special
domain name to the guest VM network, specify the DNS suffix.</p>
</li>
<li><p class="first"><strong>Public.</strong> A public zone is available to all users. A zone that
is not public will be assigned to a particular domain. Only users
in that domain will be allowed to create guest VMs in this zone.</p>
</li>
</ul>
</li>
<li><p class="first">Choose which traffic types will be carried by the physical network.</p>
<p>The traffic types are management, public, guest, and storage traffic.
For more information about the types, roll over the icons to display
their tool tips, or see Basic Zone Network Traffic Types. This screen
starts out with some traffic types already assigned. To add more,
drag and drop traffic types onto the network. You can also change the
network name if desired.</p>
</li>
<li><p class="first">Assign a network traffic label to each traffic type on the physical
network. These labels must match the labels you have already defined
on the hypervisor host. To assign each label, click the Edit button
under the traffic type icon. A popup dialog appears where you can
type the label, then click OK.</p>
<p>These traffic labels will be defined only for the hypervisor selected
for the first cluster. For all other hypervisors, the labels can be
configured after the zone is created.</p>
</li>
<li><p class="first">Click Next.</p>
</li>
<li><p class="first">(NetScaler only) If you chose the network offering for NetScaler, you
have an additional screen to fill out. Provide the requested details
to set up the NetScaler, then click Next.</p>
<ul class="simple">
<li><strong>IP address.</strong> The NSIP (NetScaler IP) address of the NetScaler
device.</li>
<li><strong>Username/Password.</strong> The authentication credentials to access
the device. CloudStack uses these credentials to access the
device.</li>
<li><strong>Type.</strong> NetScaler device type that is being added. It could be
NetScaler VPX, NetScaler MPX, or NetScaler SDX. For a comparison
of the types, see About Using a NetScaler Load Balancer.</li>
<li><strong>Public interface.</strong> Interface of NetScaler that is configured to
be part of the public network.</li>
<li><strong>Private interface.</strong> Interface of NetScaler that is configured
to be part of the private network.</li>
<li><strong>Number of retries.</strong> Number of times to attempt a command on the
device before considering the operation failed. Default is 2.</li>
<li><strong>Capacity.</strong> Number of guest networks/accounts that will share
this NetScaler device.</li>
<li><strong>Dedicated.</strong> When marked as dedicated, this device will be
dedicated to a single account. When Dedicated is checked, the
value in the Capacity field has no significance – implicitly, its
value is 1.</li>
</ul>
</li>
<li><p class="first">(NetScaler only) Configure the IP range for public traffic. The IPs
in this range will be used for the static NAT capability which you
enabled by selecting the network offering for NetScaler with EIP and
ELB. Enter the following details, then click Add. If desired, you can
repeat this step to add more IP ranges. When done, click Next.</p>
<ul class="simple">
<li><strong>Gateway.</strong> The gateway in use for these IP addresses.</li>
<li><strong>Netmask.</strong> The netmask associated with this IP range.</li>
<li><strong>VLAN.</strong> The VLAN that will be used for public traffic.</li>
<li><strong>Start IP/End IP.</strong> A range of IP addresses that are assumed to
be accessible from the Internet and will be allocated for access
to guest VMs.</li>
</ul>
</li>
<li><p class="first">In a new zone, CloudStack adds the first pod for you. You can always
add more pods later. For an overview of what a pod is, see <a class="reference internal" href="../conceptsandterminology/concepts.html#about-pods"><span class="std std-ref">About Pods</span></a></p>
<p>To configure the first pod, enter the following, then click Next:</p>
<ul class="simple">
<li><strong>Pod Name.</strong> A name for the pod.</li>
<li><strong>Reserved system gateway.</strong> The gateway for the hosts in that
pod.</li>
<li><strong>Reserved system netmask.</strong> The network prefix that defines the
pod’s subnet. Use CIDR notation.</li>
<li><strong>Start/End Reserved System IP.</strong> The IP range in the management
network that CloudStack uses to manage various system VMs, such as
Secondary Storage VMs, Console Proxy VMs, and DHCP. For more
information, see System Reserved IP Addresses.</li>
</ul>
</li>
<li><p class="first">Configure the network for guest traffic. Provide the following, then
click Next:</p>
<ul class="simple">
<li><strong>Guest gateway.</strong> The gateway that the guests should use.</li>
<li><strong>Guest netmask.</strong> The netmask in use on the subnet the guests
will use.</li>
<li><strong>Guest start IP/End IP.</strong> Enter the first and last IP addresses
that define a range that CloudStack can assign to guests.<ul>
<li>We strongly recommend the use of multiple NICs. If multiple
NICs are used, they may be in a different subnet.</li>
<li>If one NIC is used, these IPs should be in the same CIDR as the
pod CIDR.</li>
</ul>
</li>
</ul>
</li>
<li><p class="first">In a new pod, CloudStack adds the first cluster for you. You can
always add more clusters later. For an overview of what a cluster is,
see About Clusters.</p>
<p>To configure the first cluster, enter the following, then click Next:</p>
<ul class="simple">
<li><strong>Hypervisor.</strong> (Version 3.0.0 only; in 3.0.1, this field is read
only) Choose the type of hypervisor software that all hosts in
this cluster will run. If you choose VMware, additional fields
appear so you can give information about a vSphere cluster. For
vSphere servers, we recommend creating the cluster of hosts in
vCenter and then adding the entire cluster to CloudStack. See Add
Cluster: vSphere.</li>
<li><strong>Cluster name.</strong> Enter a name for the cluster. This can be text
of your choosing and is not used by CloudStack.</li>
</ul>
</li>
<li><p class="first">In a new cluster, CloudStack adds the first host for you. You can
always add more hosts later. For an overview of what a host is, see
About Hosts.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When you add a hypervisor host to CloudStack, the host must not have
any VMs already running.</p>
</div>
<p>Before you can configure the host, you need to install the hypervisor
software on the host. You will need to know which version of the
hypervisor software version is supported by CloudStack and what
additional configuration is required to ensure the host will work
with CloudStack. To find these installation details, see:</p>
<ul class="simple">
<li>Citrix XenServer Installation and Configuration</li>
<li>VMware vSphere Installation and Configuration</li>
<li>KVM vSphere Installation and Configuration</li>
</ul>
<p>To configure the first host, enter the following, then click Next:</p>
<ul class="simple">
<li><strong>Host Name.</strong> The DNS name or IP address of the host.</li>
<li><strong>Username.</strong> The username is root.</li>
<li><strong>Password.</strong> This is the password for the user named above (from
your XenServer or KVM install).</li>
<li><strong>Host Tags.</strong> (Optional) Any labels that you use to categorize
hosts for ease of maintenance. For example, you can set this to
the cloud’s HA tag (set in the ha.tag global configuration
parameter) if you want this host to be used only for VMs with the
“high availability” feature enabled. For more information, see
HA-Enabled Virtual Machines as well as HA for Hosts.</li>
</ul>
</li>
<li><p class="first">In a new cluster, CloudStack adds the first primary storage server
for you. You can always add more servers later. For an overview of
what primary storage is, see About Primary Storage.</p>
<p>To configure the first primary storage server, enter the following,
then click Next:</p>
<ul class="simple">
<li><strong>Name.</strong> The name of the storage device.</li>
<li><strong>Protocol.</strong> For XenServer, choose either NFS, iSCSI, or
PreSetup. For KVM, choose NFS, SharedMountPoint,CLVM, or RBD. For
vSphere choose either VMFS (iSCSI or FiberChannel) or NFS. The
remaining fields in the screen vary depending on what you choose
here.</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="id4">
<h3>Advanced Zone Configuration<a class="headerlink" href="configuration.html#id4" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">After you select Advanced in the Add Zone wizard and click Next, you
will be asked to enter the following details. Then click Next.</p>
<ul class="simple">
<li><strong>Name.</strong> A name for the zone.</li>
<li><strong>DNS 1 and 2.</strong> These are DNS servers for use by guest VMs in the
zone. These DNS servers will be accessed via the public network
you will add later. The public IP addresses for the zone must have
a route to the DNS server named here.</li>
<li><strong>Internal DNS 1 and Internal DNS 2.</strong> These are DNS servers for
use by system VMs in the zone(these are VMs used by CloudStack
itself, such as virtual routers, console proxies,and Secondary
Storage VMs.) These DNS servers will be accessed via the
management traffic network interface of the System VMs. The
private IP address you provide for the pods must have a route to
the internal DNS server named here.</li>
<li><strong>Network Domain.</strong> (Optional) If you want to assign a special
domain name to the guest VM network, specify the DNS suffix.</li>
<li><strong>Guest CIDR.</strong> This is the CIDR that describes the IP addresses
in use in the guest virtual networks in this zone. For example,
10.1.1.0/24. As a matter of good practice you should set different
CIDRs for different zones. This will make it easier to set up VPNs
between networks in different zones.</li>
<li><strong>Hypervisor.</strong> (Introduced in version 3.0.1) Choose the
hypervisor for the first cluster in the zone. You can add clusters
with different hypervisors later, after you finish adding the
zone.</li>
<li><strong>Public.</strong> A public zone is available to all users. A zone that
is not public will be assigned to a particular domain. Only users
in that domain will be allowed to create guest VMs in this zone.</li>
</ul>
</li>
<li><p class="first">Choose which traffic types will be carried by the physical network.</p>
<p>The traffic types are management, public, guest, and storage traffic.
For more information about the types, roll over the icons to display
their tool tips, or see <a class="reference internal" href="../conceptsandterminology/concepts.html#about-adv-network-traffic-types"><span class="std std-ref">Advanced Zone Network Traffic Types</span></a>.
This screenstarts out with one network already configured. If you have
multiple physical networks, you need to add more. Drag and drop traffic
types onto a greyed-out network and it will become active. You can move the
traffic icons from one network to another; for example, if the
default traffic types shown for Network 1 do not match your actual
setup, you can move them down. You can also change the network names
if desired.</p>
</li>
<li><p class="first">(Introduced in version 3.0.1) Assign a network traffic label to each
traffic type on each physical network. These labels must match the
labels you have already defined on the hypervisor host. To assign
each label, click the Edit button under the traffic type icon within
each physical network. A popup dialog appears where you can type the
label, then click OK.</p>
<p>These traffic labels will be defined only for the hypervisor selected
for the first cluster. For all other hypervisors, the labels can be
configured after the zone is created.</p>
<p>(VMware only) If you have enabled Nexus dvSwitch in the environment,
you must specify the corresponding Ethernet port profile names as
network traffic label for each traffic type on the physical network.
For more information on Nexus dvSwitch, see Configuring a vSphere
Cluster with Nexus 1000v Virtual Switch in the Installation Guide. If
you have enabled VMware dvSwitch in the environment, you must specify
the corresponding Switch name as network traffic label for each
traffic type on the physical network. For more information, see
Configuring a VMware Datacenter with VMware Distributed Virtual
Switch in the Installation Guide.</p>
</li>
<li><p class="first">Click Next.</p>
</li>
<li><p class="first">Configure the IP range for public Internet traffic. Enter the
following details, then click Add. If desired, you can repeat this
step to add more public Internet IP ranges. When done, click Next.</p>
<ul class="simple">
<li><strong>Gateway.</strong> The gateway in use for these IP addresses.</li>
<li><strong>Netmask.</strong> The netmask associated with this IP range.</li>
<li><strong>VLAN.</strong> The VLAN that will be used for public traffic.</li>
<li><strong>Start IP/End IP.</strong> A range of IP addresses that are assumed to
be accessible from the Internet and will be allocated for access
to guest networks.</li>
</ul>
</li>
<li><p class="first">In a new zone, CloudStack adds the first pod for you. You can always
add more pods later. For an overview of what a pod is, see <a class="reference internal" href="../conceptsandterminology/concepts.html#about-pods"><span class="std std-ref">About Pods</span></a></p>
<p>To configure the first pod, enter the following, then click Next:</p>
<ul class="simple">
<li><strong>Pod Name.</strong> A name for the pod.</li>
<li><strong>Reserved system gateway.</strong> The gateway for the hosts in that
pod.</li>
<li><strong>Reserved system netmask.</strong> The network prefix that defines the
pod’s subnet. Use CIDR notation.</li>
<li><strong>Start/End Reserved System IP.</strong> The IP range in the management
network that CloudStack uses to manage various system VMs, such as
Secondary Storage VMs, Console Proxy VMs, and DHCP. For more
information, see <a class="reference internal" href="../conceptsandterminology/concepts.html#about-system-reserved-ip-addresses"><span class="std std-ref">System Reserved IP Addresses</span></a></li>
</ul>
</li>
<li><p class="first">Specify a range of VLAN IDs to carry guest traffic for each physical
network (see VLAN Allocation Example ), then click Next.</p>
</li>
<li><p class="first">In a new pod, CloudStack adds the first cluster for you. You can
always add more clusters later. For an overview of what a cluster is,
see <a class="reference internal" href="../conceptsandterminology/concepts.html#about-clusters"><span class="std std-ref">About Clusters</span></a></p>
<p>To configure the first cluster, enter the following, then click Next:</p>
<ul class="simple">
<li><strong>Hypervisor.</strong> (Version 3.0.0 only; in 3.0.1, this field is read
only) Choose the type of hypervisor software that all hosts in
this cluster will run. If you choose VMware, additional fields
appear so you can give information about a vSphere cluster. For
vSphere servers, we recommend creating the cluster of hosts in
vCenter and then adding the entire cluster to CloudStack. See Add
Cluster: vSphere .</li>
<li><strong>Cluster name.</strong> Enter a name for the cluster. This can be text
of your choosing and is not used by CloudStack.</li>
</ul>
</li>
<li><p class="first">In a new cluster, CloudStack adds the first host for you. You can
always add more hosts later. For an overview of what a host is, see <a class="reference internal" href="../conceptsandterminology/concepts.html#about-hosts"><span class="std std-ref">About Hosts</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When you deploy CloudStack, the hypervisor host must not have any VMs
already running.</p>
</div>
<p>Before you can configure the host, you need to install the hypervisor
software on the host. You will need to know which version of the
hypervisor software version is supported by CloudStack and what
additional configuration is required to ensure the host will work
with CloudStack. To find these installation details, see:</p>
<ul class="simple">
<li>Citrix XenServer Installation for CloudStack</li>
<li>VMware vSphere Installation and Configuration</li>
<li>KVM Installation and Configuration</li>
</ul>
<p>To configure the first host, enter the following, then click Next:</p>
<ul class="simple">
<li><strong>Host Name.</strong> The DNS name or IP address of the host.</li>
<li><strong>Username.</strong> Usually root.</li>
<li><strong>Password.</strong> This is the password for the user named above (from
your XenServer or KVM install).</li>
<li><strong>Host Tags.</strong> (Optional) Any labels that you use to categorize
hosts for ease of maintenance. For example, you can set to the
cloud’s HA tag (set in the ha.tag global configuration parameter)
if you want this host to be used only for VMs with the “high
availability” feature enabled. For more information, see
HA-Enabled Virtual Machines as well as HA for Hosts, both in the
Administration Guide.</li>
</ul>
</li>
<li><p class="first">In a new cluster, CloudStack adds the first primary storage server
for you. You can always add more servers later. For an overview of
what primary storage is, see <a class="reference internal" href="../conceptsandterminology/storage_setup.html#about-primary-storage"><span class="std std-ref">Primary Storage</span></a></p>
<p>To configure the first primary storage server, enter the following,
then click Next:</p>
<ul>
<li><p class="first"><strong>Name.</strong> The name of the storage device.</p>
</li>
<li><p class="first"><strong>Protocol.</strong> For XenServer, choose either NFS, iSCSI, or
PreSetup. For KVM, choose NFS, SharedMountPoint, CLVM, and RBD.
For vSphere choose either VMFS (iSCSI or FiberChannel) or NFS. The
remaining fields in the screen vary depending on what you choose
here.</p>
<table border="1" class="table-striped table-bordered table-hover docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>NFS</td>
<td><ul class="first last simple">
<li><strong>Server.</strong> The IP address or DNS name of the storage device.</li>
<li><strong>Path.</strong> The exported path from the server.</li>
<li><strong>Tags (optional).</strong> The comma-separated list of tags for this
storage device. It should be an equivalent set or superset of
the tags on your disk offerings.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>iSCSI</td>
<td><ul class="first last simple">
<li><strong>Server.</strong> The IP address or DNS name of the storage device.</li>
<li><strong>Target IQN.</strong> The IQN of the target. For example,
iqn.1986-03.com.sun:02:01ec9bb549-1271378984.</li>
<li><strong>Lun.</strong> The LUN number. For example, 3.</li>
<li><strong>Tags (optional).</strong> The comma-separated list of tags for this
storage device. It should be an equivalent set or superset of
the tags on your disk offerings.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>preSetup</td>
<td><ul class="first last simple">
<li><strong>Server.</strong> The IP address or DNS name of the storage device.</li>
<li><strong>SR Name-Label.</strong> Enter the name-label of the SR that has been
set up outside CloudStack.</li>
<li><strong>Tags (optional).</strong> The comma-separated list of tags for this
storage device. It should be an equivalent set or superset of
the tags on your disk offerings.</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>SharedMountPoint</td>
<td><ul class="first last simple">
<li><strong>Path.</strong> The path on each host that is where this primary
storage is mounted. For example, “/mnt/primary”.</li>
<li><strong>Tags (optional).</strong> The comma-separated list of tags for this
storage device. It should be an equivalent set or superset of
the tags on your disk offerings.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>VMFS</td>
<td><ul class="first last simple">
<li><strong>Server.</strong> The IP address or DNS name of the vCenter server.</li>
<li><strong>Path.</strong> A combination of the datacenter name and the
datastore name. The format is “/” datacenter name “/” datastore
name. For example, “/cloud.dc.VM/cluster1datastore”.</li>
<li><strong>Tags (optional).</strong> The comma-separated list of tags for this
storage device. It should be an equivalent set or superset of
the tags on your disk offerings.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The tag sets on primary storage across clusters in a Zone must be
identical. For example, if cluster A provides primary storage that
has tags T1 and T2, all other clusters in the Zone must also
provide primary storage that has tags T1 and T2.</p>
</li>
</ul>
</li>
</ol>
<ol class="arabic" id="installing-secondary-storage">
<li><p class="first">In a new zone, CloudStack connects the first secondary storage server for
you. For an overview of what secondary storage is, see <a class="reference internal" href="../conceptsandterminology/storage_setup.html#about-secondary-storage"><span class="std std-ref">Secondary Storage</span></a></p>
<p>Before you can fill out this screen, you need to prepare the
secondary storage by setting up NFS shares and installing the latest
CloudStack System VM template. See Adding Secondary Storage :</p>
<ul class="simple">
<li><strong>NFS Server.</strong> The IP address of the server or fully qualified
domain name of the server.</li>
<li><strong>Path.</strong> The exported path from the server.</li>
</ul>
</li>
<li><p class="first">Click Launch.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="adding-a-pod">
<span id="id5"></span><h2>Adding a Pod<a class="headerlink" href="configuration.html#adding-a-pod" title="Permalink to this headline">¶</a></h2>
<p>When you created a new zone, CloudStack adds the first pod for you. You
can add more pods at any time using the procedure in this section.</p>
<ol class="arabic simple">
<li>Log in to the CloudStack UI. See <a class="reference internal" href="../adminguide/ui.html#log-in-to-ui"><span class="std std-ref">Log In to the UI</span></a>.</li>
<li>In the left navigation, choose Infrastructure. In Zones, click View
More, then click the zone to which you want to add a pod.</li>
<li>Click the Compute and Storage tab. In the Pods node of the diagram,
click View All.</li>
<li>Click Add Pod.</li>
<li>Enter the following details in the dialog.<ul>
<li><strong>Name.</strong> The name of the pod.</li>
<li><strong>Gateway.</strong> The gateway for the hosts in that pod.</li>
<li><strong>Netmask.</strong> The network prefix that defines the pod’s subnet. Use
CIDR notation.</li>
<li><strong>Start/End Reserved System IP.</strong> The IP range in the management
network that CloudStack uses to manage various system VMs, such as
Secondary Storage VMs, Console Proxy VMs, and DHCP. For more
information, see System Reserved IP Addresses.</li>
</ul>
</li>
<li>Click OK.</li>
</ol>
</div>
<div class="section" id="adding-a-cluster">
<span id="id6"></span><h2>Adding a Cluster<a class="headerlink" href="configuration.html#adding-a-cluster" title="Permalink to this headline">¶</a></h2>
<p>You need to tell CloudStack about the hosts that it will manage. Hosts
exist inside clusters, so before you begin adding hosts to the cloud,
you must add at least one cluster.</p>
<div class="section" id="add-cluster-kvm-or-xenserver">
<h3>Add Cluster: KVM or XenServer<a class="headerlink" href="configuration.html#add-cluster-kvm-or-xenserver" title="Permalink to this headline">¶</a></h3>
<p>These steps assume you have already installed the hypervisor on the
hosts and logged in to the CloudStack UI.</p>
<ol class="arabic simple">
<li>In the left navigation, choose Infrastructure. In Zones, click View
More, then click the zone in which you want to add the cluster.</li>
<li>Click the Compute tab.</li>
<li>In the Clusters node of the diagram, click View All.</li>
<li>Click Add Cluster.</li>
<li>Choose the hypervisor type for this cluster.</li>
<li>Choose the pod in which you want to create the cluster.</li>
<li>Enter a name for the cluster. This can be text of your choosing and
is not used by CloudStack.</li>
<li>Click OK.</li>
</ol>
</div>
<div class="section" id="add-cluster-vsphere">
<h3>Add Cluster: vSphere<a class="headerlink" href="configuration.html#add-cluster-vsphere" title="Permalink to this headline">¶</a></h3>
<p>Host management for vSphere is done through a combination of vCenter and
the CloudStack admin UI. CloudStack requires that all hosts be in a
CloudStack cluster, but the cluster may consist of a single host. As an
administrator you must decide if you would like to use clusters of one
host or of multiple hosts. Clusters of multiple hosts allow for features
like live migration. Clusters also require shared storage such as NFS or
iSCSI.</p>
<p>For vSphere servers, we recommend creating the cluster of hosts in
vCenter and then adding the entire cluster to CloudStack. Follow these
requirements:</p>
<ul class="simple">
<li>Do not put more than 8 hosts in a vSphere cluster</li>
<li>Make sure the hypervisor hosts do not have any VMs already running
before you add them to CloudStack.</li>
</ul>
<p>To add a vSphere cluster to CloudStack:</p>
<ol class="arabic">
<li><p class="first">Create the cluster of hosts in vCenter. Follow the vCenter
instructions to do this. You will create a cluster that looks
something like this in vCenter.</p>
<p><img alt="vsphereclient.png: vSphere client" src="../_images/vsphere-client.png" /></p>
</li>
<li><p class="first">Log in to the UI.</p>
</li>
<li><p class="first">In the left navigation, choose Infrastructure. In Zones, click View
More, then click the zone in which you want to add the cluster.</p>
</li>
<li><p class="first">Click the Compute tab, and click View All on Pods. Choose the pod to
which you want to add the cluster.</p>
</li>
<li><p class="first">Click View Clusters.</p>
</li>
<li><p class="first">Click Add Cluster.</p>
</li>
<li><p class="first">In Hypervisor, choose VMware.</p>
</li>
<li><p class="first">Provide the following information in the dialog. The fields below
make reference to the values from vCenter.</p>
<p><img alt="addcluster.png: add a cluster" src="../_images/add-cluster.png" /></p>
<ul>
<li><p class="first"><strong>Cluster Name</strong>: Enter the name of the cluster you created in
vCenter. For example, “cloud.cluster.2.2.1”</p>
</li>
<li><p class="first"><strong>vCenter Username</strong>: Enter the username that CloudStack should
use to connect to vCenter. This user must have all the
administrative privileges.</p>
</li>
<li><p class="first"><strong>CPU overcommit ratio</strong>: Enter the CPU overcommit ratio for the
cluster. The value you enter determines the CPU consumption of
each VM in the selected cluster. By increasing the
over-provisioning ratio, more resource capacity will be used. If
no value is specified, the value is defaulted to 1, which implies
no over-provisioning is done.</p>
</li>
<li><p class="first"><strong>RAM overcommit ratio</strong>: Enter the RAM overcommit ratio for the
cluster. The value you enter determines the memory consumption of
each VM in the selected cluster. By increasing the
over-provisioning ratio, more resource capacity will be used. If
no value is specified, the value is defaulted to 1, which implies
no over-provisioning is done.</p>
</li>
<li><p class="first"><strong>vCenter Host</strong>: Enter the hostname or IP address of the vCenter
server.</p>
</li>
<li><p class="first"><strong>vCenter Password</strong>: Enter the password for the user named above.</p>
</li>
<li><p class="first"><strong>vCenter Datacenter</strong>: Enter the vCenter datacenter that the
cluster is in. For example, “cloud.dc.VM”.</p>
</li>
<li><p class="first"><strong>Override Public Traffic</strong>: Enable this option to override the
zone-wide public traffic for the cluster you are creating.</p>
</li>
<li><p class="first"><strong>Public Traffic vSwitch Type</strong>: This option is displayed only if
you enable the Override Public Traffic option. Select a desirable
switch. If the vmware.use.dvswitch global parameter is true, the
default option will be VMware vNetwork Distributed Virtual Switch.</p>
<p>If you have enabled Nexus dvSwitch in the environment, the
following parameters for dvSwitch configuration are displayed:</p>
<ul class="simple">
<li>Nexus dvSwitch IP Address: The IP address of the Nexus VSM
appliance.</li>
<li>Nexus dvSwitch Username: The username required to access the
Nexus VSM appliance.</li>
<li>Nexus dvSwitch Password: The password associated with the
username specified above.</li>
</ul>
</li>
<li><p class="first"><strong>Override Guest Traffic</strong>: Enable this option to override the
zone-wide guest traffic for the cluster you are creating.</p>
</li>
<li><p class="first"><strong>Guest Traffic vSwitch Type</strong>: This option is displayed only if
you enable the Override Guest Traffic option. Select a desirable
switch.</p>
<p>If the vmware.use.dvswitch global parameter is true, the default
option will be VMware vNetwork Distributed Virtual Switch.</p>
<p>If you have enabled Nexus dvSwitch in the environment, the
following parameters for dvSwitch configuration are displayed:</p>
<ul class="simple">
<li>Nexus dvSwitch IP Address: The IP address of the Nexus VSM
appliance.</li>
<li>Nexus dvSwitch Username: The username required to access the
Nexus VSM appliance.</li>
<li>Nexus dvSwitch Password: The password associated with the
username specified above.</li>
</ul>
</li>
<li><p class="first">There might be a slight delay while the cluster is provisioned. It
will automatically display in the UI.</p>
</li>
</ul>
</li>
</ol>
</div>
</div>
<div class="section" id="adding-a-host">
<span id="id7"></span><h2>Adding a Host<a class="headerlink" href="configuration.html#adding-a-host" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Before adding a host to the CloudStack configuration, you must first
install your chosen hypervisor on the host. CloudStack can manage
hosts running VMs under a variety of hypervisors.</p>
<p>The CloudStack Installation Guide provides instructions on how to
install each supported hypervisor and configure it for use with
CloudStack. See the appropriate section in the Installation Guide for
information about which version of your chosen hypervisor is
supported, as well as crucial additional steps to configure the
hypervisor hosts for use with CloudStack.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be sure you have performed the additional CloudStack-specific
configuration steps described in the hypervisor installation section for
your particular hypervisor.</p>
</div>
</li>
<li><p class="first">Now add the hypervisor host to CloudStack. The technique to use
varies depending on the hypervisor.</p>
<ul class="simple">
<li><a class="reference internal" href="configuration.html#adding-a-host-xenserver-kvm"><span class="std std-ref">Adding a Host (XenServer or KVM)</span></a></li>
<li><a class="reference internal" href="configuration.html#adding-a-host-vsphere"><span class="std std-ref">Adding a Host (vSphere)</span></a></li>
</ul>
</li>
</ol>
<div class="section" id="adding-a-host-xenserver-or-kvm">
<span id="adding-a-host-xenserver-kvm"></span><h3>Adding a Host (XenServer or KVM)<a class="headerlink" href="configuration.html#adding-a-host-xenserver-or-kvm" title="Permalink to this headline">¶</a></h3>
<p>XenServer and KVM hosts can be added to a cluster at any time.</p>
<div class="section" id="requirements-for-xenserver-and-kvm-hosts">
<h4>Requirements for XenServer and KVM Hosts<a class="headerlink" href="configuration.html#requirements-for-xenserver-and-kvm-hosts" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Make sure the hypervisor host does not have any VMs already running before
you add it to CloudStack.</p>
</div>
<p>Configuration requirements:</p>
<ul class="simple">
<li>Each cluster must contain only hosts with the identical hypervisor.</li>
<li>For XenServer, do not put more than 8 hosts in a cluster.</li>
<li>For KVM, do not put more than 16 hosts in a cluster.</li>
</ul>
<p>For hardware requirements, see the installation section for your
hypervisor in the CloudStack Installation Guide.</p>
<div class="section" id="xenserver-host-additional-requirements">
<h5>XenServer Host Additional Requirements<a class="headerlink" href="configuration.html#xenserver-host-additional-requirements" title="Permalink to this headline">¶</a></h5>
<p>If network bonding is in use, the administrator must cable the new host
identically to other hosts in the cluster.</p>
<p>For all additional hosts to be added to the cluster, run the following
command. This will cause the host to join the master in a XenServer
pool.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># xe pool-join master-address=[master IP] master-username=root master-password=[your password]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When copying and pasting a command, be sure the command has pasted as a
single line before executing. Some document viewers may introduce unwanted
line breaks in copied text.</p>
</div>
<p>With all hosts added to the XenServer pool, run the cloud-setup-bond
script. This script will complete the configuration and setup of the
bonds on the new hosts in the cluster.</p>
<ol class="arabic">
<li><p class="first">Copy the script from the Management Server in
/usr/share/cloudstack-common/scripts/vm/hypervisor/xenserver/cloud-setup-bonding.sh
to the master host and ensure it is executable.</p>
</li>
<li><p class="first">Run the script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ./cloud-setup-bonding.sh</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="kvm-host-additional-requirements">
<h5>KVM Host Additional Requirements<a class="headerlink" href="configuration.html#kvm-host-additional-requirements" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p class="first">If shared mountpoint storage is in use, the administrator should
ensure that the new host has all the same mountpoints (with storage
mounted) as the other hosts in the cluster.</p>
</li>
<li><p class="first">Make sure the new host has the same network configuration (guest,
private, and public network) as other hosts in the cluster.</p>
</li>
<li><p class="first">If you are using OpenVswitch bridges edit the file agent.properties
on the KVM host and set the parameter network.bridge.type to
openvswitch before adding the host to CloudStack</p>
</li>
<li><p class="first">If you’re using a non-root user to add a KVM host, please add the user to
sudoers file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cloudstack ALL=NOPASSWD: /usr/bin/cloudstack-setup-agent
defaults:cloudstack !requiretty
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="adding-a-xenserver-or-kvm-host">
<h4>Adding a XenServer or KVM Host<a class="headerlink" href="configuration.html#adding-a-xenserver-or-kvm-host" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">If you have not already done so, install the hypervisor software on
the host. You will need to know which version of the hypervisor
software version is supported by CloudStack and what additional
configuration is required to ensure the host will work with
CloudStack. To find these installation details, see the appropriate
section for your hypervisor in the CloudStack Installation Guide.</p>
</li>
<li><p class="first">Log in to the CloudStack UI as administrator.</p>
</li>
<li><p class="first">In the left navigation, choose Infrastructure. In Zones, click View
More, then click the zone in which you want to add the host.</p>
</li>
<li><p class="first">Click the Compute tab. In the Clusters node, click View All.</p>
</li>
<li><p class="first">Click the cluster where you want to add the host.</p>
</li>
<li><p class="first">Click View Hosts.</p>
</li>
<li><p class="first">Click Add Host.</p>
</li>
<li><p class="first">Provide the following information.</p>
<ul class="simple">
<li>Host Name. The DNS name or IP address of the host.</li>
<li>Username. Usually root.</li>
<li>Password. This is the password for the user from your XenServer or
KVM install).</li>
<li>Host Tags (Optional). Any labels that you use to categorize hosts
for ease of maintenance. For example, you can set to the cloud’s
HA tag (set in the ha.tag global configuration parameter) if you
want this host to be used only for VMs with the “high
availability” feature enabled. For more information, see
HA-Enabled Virtual Machines as well as HA for Hosts.</li>
</ul>
<p>There may be a slight delay while the host is provisioned. It should
automatically display in the UI.</p>
</li>
<li><p class="first">Repeat for additional hosts.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="adding-a-host-vsphere">
<span id="id8"></span><h3>Adding a Host (vSphere)<a class="headerlink" href="configuration.html#adding-a-host-vsphere" title="Permalink to this headline">¶</a></h3>
<p>For vSphere servers, we recommend creating the cluster of hosts in
vCenter and then adding the entire cluster to CloudStack. See Add
Cluster: vSphere.</p>
</div>
</div>
<div class="section" id="add-primary-storage">
<span id="id9"></span><h2>Add Primary Storage<a class="headerlink" href="configuration.html#add-primary-storage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="system-requirements-for-primary-storage">
<h3>System Requirements for Primary Storage<a class="headerlink" href="configuration.html#system-requirements-for-primary-storage" title="Permalink to this headline">¶</a></h3>
<p>Hardware requirements:</p>
<ul class="simple">
<li>Any standards-compliant iSCSI, SMB, or NFS server that is supported
by the underlying hypervisor.</li>
<li>The storage server should be a machine with a large number of disks.
The disks should ideally be managed by a hardware RAID controller.</li>
<li>Minimum required capacity depends on your needs.</li>
</ul>
<p>When setting up primary storage, follow these restrictions:</p>
<ul class="simple">
<li>Primary storage cannot be added until a host has been added to the
cluster.</li>
<li>If you do not provision shared primary storage, you must set the
global configuration parameter system.vm.local.storage.required to
true, or else you will not be able to start VMs.</li>
</ul>
</div>
<div class="section" id="adding-primary-storage">
<h3>Adding Primary Storage<a class="headerlink" href="configuration.html#adding-primary-storage" title="Permalink to this headline">¶</a></h3>
<p>When you create a new zone, the first primary storage is added as part
of that procedure. You can add primary storage servers at any time, such
as when adding a new cluster or adding more servers to an existing
cluster.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When using preallocated storage for primary storage, be sure there is
nothing on the storage (ex. you have an empty SAN volume or an empty NFS
share). Adding the storage to CloudStack will destroy any existing data.</p>
</div>
<ol class="arabic">
<li><p class="first">Log in to the CloudStack UI <a class="reference internal" href="../adminguide/ui.html#log-in-to-ui"><span class="std std-ref">Log In to the UI</span></a>.</p>
</li>
<li><p class="first">In the left navigation, choose Infrastructure. In Zones, click View
More, then click the zone in which you want to add the primary
storage.</p>
</li>
<li><p class="first">Click the Compute tab.</p>
</li>
<li><p class="first">In the Primary Storage node of the diagram, click View All.</p>
</li>
<li><p class="first">Click Add Primary Storage.</p>
</li>
<li><p class="first">Provide the following information in the dialog. The information
required varies depending on your choice in Protocol.</p>
<ul class="simple">
<li><strong>Scope.</strong> Indicate whether the storage is available to all hosts
in the zone or only to hosts in a single cluster.</li>
<li><strong>Pod.</strong> (Visible only if you choose Cluster in the Scope field.)
The pod for the storage device.</li>
<li><strong>Cluster.</strong> (Visible only if you choose Cluster in the Scope
field.) The cluster for the storage device.</li>
<li><strong>Name.</strong> The name of the storage device.</li>
<li><strong>Protocol.</strong> For XenServer, choose either NFS, iSCSI, or
PreSetup. For KVM, choose NFS or SharedMountPoint. For vSphere
choose either VMFS (iSCSI or FiberChannel) or NFS. For Hyper-V,
choose SMB.</li>
<li><strong>Server (for NFS, iSCSI, or PreSetup).</strong> The IP address or DNS
name of the storage device.</li>
<li><strong>Server (for VMFS).</strong> The IP address or DNS name of the vCenter
server.</li>
<li><strong>Path (for NFS).</strong> In NFS this is the exported path from the
server.</li>
<li><strong>Path (for VMFS).</strong> In vSphere this is a combination of the
datacenter name and the datastore name. The format is “/”
datacenter name “/” datastore name. For example,
“/cloud.dc.VM/cluster1datastore”.</li>
<li><strong>Path (for SharedMountPoint).</strong> With KVM this is the path on each
host that is where this primary storage is mounted. For example,
“/mnt/primary”.</li>
<li><strong>SMB Username</strong> (for SMB/CIFS): Applicable only if you select
SMB/CIFS provider. The username of the account which has the
necessary permissions to the SMB shares. The user must be part of
the Hyper-V administrator group.</li>
<li><strong>SMB Password</strong> (for SMB/CIFS): Applicable only if you select
SMB/CIFS provider. The password associated with the account.</li>
<li><strong>SMB Domain</strong>(for SMB/CIFS): Applicable only if you select
SMB/CIFS provider. The Active Directory domain that the SMB share
is a part of.</li>
<li><strong>SR Name-Label (for PreSetup).</strong> Enter the name-label of the SR
that has been set up outside CloudStack.</li>
<li><strong>Target IQN (for iSCSI).</strong> In iSCSI this is the IQN of the
target. For example, iqn.1986-03.com.sun:02:01ec9bb549-1271378984.</li>
<li><strong>Lun # (for iSCSI).</strong> In iSCSI this is the LUN number. For
example, 3.</li>
<li><strong>Tags (optional).</strong> The comma-separated list of tags for this
storage device. It should be an equivalent set or superset of the
tags on your disk offerings..</li>
</ul>
<p>The tag sets on primary storage across clusters in a Zone must be
identical. For example, if cluster A provides primary storage that
has tags T1 and T2, all other clusters in the Zone must also provide
primary storage that has tags T1 and T2.</p>
</li>
<li><p class="first">Click OK.</p>
</li>
</ol>
</div>
<div class="section" id="configuring-a-storage-plug-in">
<h3>Configuring a Storage Plug-in<a class="headerlink" href="configuration.html#configuring-a-storage-plug-in" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Primary storage that is based on a custom plug-in (ex. SolidFire) must be
added through the CloudStack API (described later in this section). There
is no support at this time through the CloudStack UI to add this type of
primary storage (although most of its features are available through the
CloudStack UI).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The SolidFire storage plug-in for CloudStack is part of the standard
CloudStack install. There is no additional work required to add this
component.</p>
</div>
<p>Adding primary storage that is based on the SolidFire plug-in enables
CloudStack to provide hard quality-of-service (QoS) guarantees.</p>
<p>When used with Compute or Disk Offerings, an administrator is able to
build an environment in which a root or data disk that a user creates
leads to the dynamic creation of a SolidFire volume, which has guaranteed
performance. Such a SolidFire volume is associated with one (and only
ever one) CloudStack volume, so performance of the CloudStack volume
does not vary depending on how heavily other tenants are using the
system.</p>
<p>The createStoragePool API has been augmented to support plugable storage
providers. The following is a list of parameters to use when adding
storage to CloudStack that is based on the SolidFire plug-in:</p>
<ul class="simple">
<li>command=createStoragePool</li>
<li>scope=zone</li>
<li>zoneId=[your zone id]</li>
<li>name=[name for primary storage]</li>
<li>hypervisor=Any</li>
<li>provider=SolidFire</li>
<li>capacityIops=[whole number of IOPS from the SAN to give to
CloudStack]</li>
<li>capacityBytes=[whole number of bytes from the SAN to give to
CloudStack]</li>
</ul>
<p>The url parameter is somewhat unique in that its value can contain
additional key/value pairs.</p>
<p>url=[key/value pairs detailed below (values are URL encoded; for
example, ‘=’ is represented as ‘%3D’)]</p>
<ul class="simple">
<li>MVIP%3D[Management Virtual IP Address] (can be suffixed with :[port
number])</li>
<li>SVIP%3D[Storage Virtual IP Address] (can be suffixed with :[port
number])</li>
<li>clusterAdminUsername%3D[cluster admin’s username]</li>
<li>clusterAdminPassword%3D[cluster admin’s password]</li>
<li>clusterDefaultMinIops%3D[Min IOPS (whole number) to set for a volume;
used if Min IOPS is not specified by administrator or user]</li>
<li>clusterDefaultMaxIops%3D[Max IOPS (whole number) to set for a volume;
used if Max IOPS is not specified by administrator or user]</li>
<li>clusterDefaultBurstIopsPercentOfMaxIops%3D[Burst IOPS is determined
by (Min IOPS * clusterDefaultBurstIopsPercentOfMaxIops parameter)
(can be a decimal value)]</li>
</ul>
</div>
</div>
<div class="section" id="add-secondary-storage">
<span id="id10"></span><h2>Add Secondary Storage<a class="headerlink" href="configuration.html#add-secondary-storage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="system-requirements-for-secondary-storage">
<h3>System Requirements for Secondary Storage<a class="headerlink" href="configuration.html#system-requirements-for-secondary-storage" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>NFS storage appliance or Linux NFS server</li>
<li>SMB/CIFS (Hyper-V)</li>
<li>(Optional) OpenStack Object Storage (Swift) (see
<a class="reference external" href="http://swift.openstack.org">http://swift.openstack.org</a>)</li>
<li>100GB minimum capacity</li>
<li>A secondary storage device must be located in the same zone as the
guest VMs it serves.</li>
<li>Each Secondary Storage server must be available to all hosts in the
zone.</li>
</ul>
</div>
<div class="section" id="adding-secondary-storage">
<h3>Adding Secondary Storage<a class="headerlink" href="configuration.html#adding-secondary-storage" title="Permalink to this headline">¶</a></h3>
<p>When you create a new zone, the first secondary storage is added as part
of that procedure. You can add secondary storage servers at any time to
add more servers to an existing zone.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Ensure that nothing is stored on the server. Adding the server to
CloudStack will destroy any existing data.</p>
</div>
<ol class="arabic">
<li><p class="first">To prepare for the zone-based Secondary Staging Store, you should
have created and mounted an NFS share during Management Server
installation. See <a class="reference internal" href="management-server/index.html#prepare-nfs-shares"><span class="std std-ref">Prepare NFS Shares</span></a>.</p>
<p>If you are using an Hyper-V host, ensure that you have created a SMB
share.</p>
</li>
<li><p class="first">Make sure you prepared the system VM template during Management
Server installation. See <a class="reference external" href="http://docs.cloudstack.apache.org/en/latest/installguide/installation.html#prepare-the-system-vm-template">“Prepare the System VM Template”</a>.</p>
</li>
<li><p class="first">Log in to the CloudStack UI as root administrator.</p>
</li>
<li><p class="first">In the left navigation bar, click Infrastructure.</p>
</li>
<li><p class="first">In Secondary Storage, click View All.</p>
</li>
<li><p class="first">Click Add Secondary Storage.</p>
</li>
<li><p class="first">Fill in the following fields:</p>
<ul>
<li><p class="first">Name. Give the storage a descriptive name.</p>
</li>
<li><p class="first">Provider. Choose S3, Swift, NFS, or CIFS then fill in the related
fields which appear. The fields will vary depending on the storage
provider; for more information, consult the provider’s
documentation (such as the S3 or Swift website). NFS can be used
for zone-based storage, and the others for region-wide storage.
For Hyper-V, select SMB/CIFS.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Heterogeneous Secondary Storage is not supported in Regions. You can
use only a single NFS, S3, or Swift account per region.</p>
</div>
</li>
<li><p class="first">Create NFS Secondary Staging Store. This box must always be
checked.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Even if the UI allows you to uncheck this box, do not do so. This
checkbox and the three fields below it must be filled in. Even when
Swift or S3 is used as the secondary storage provider, an NFS staging
storage in each zone is still required.</p>
</div>
</li>
<li><p class="first">Zone. The zone where the NFS Secondary Staging Store is to be
located.</p>
</li>
<li><p class="first"><strong>SMB Username</strong>: Applicable only if you select SMB/CIFS provider.
The username of the account which has the necessary permissions to
the SMB shares. The user must be part of the Hyper-V administrator
group.</p>
</li>
<li><p class="first"><strong>SMB Password</strong>: Applicable only if you select SMB/CIFS provider.
The password associated with the account.</p>
</li>
<li><p class="first"><strong>SMB Domain</strong>: Applicable only if you select SMB/CIFS provider.
The Active Directory domain that the SMB share is a part of.</p>
</li>
<li><p class="first">NFS server. The name of the zone’s Secondary Staging Store.</p>
</li>
<li><p class="first">Path. The path to the zone’s Secondary Staging Store.</p>
</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="adding-an-nfs-secondary-staging-store-for-each-zone">
<h3>Adding an NFS Secondary Staging Store for Each Zone<a class="headerlink" href="configuration.html#adding-an-nfs-secondary-staging-store-for-each-zone" title="Permalink to this headline">¶</a></h3>
<p>Every zone must have at least one NFS store provisioned; multiple NFS
servers are allowed per zone. To provision an NFS Staging Store for a
zone:</p>
<ol class="arabic simple">
<li>Log in to the CloudStack UI as root administrator.</li>
<li>In the left navigation bar, click Infrastructure.</li>
<li>In Secondary Storage, click View All.</li>
<li>In Select View, choose Secondary Staging Store.</li>
<li>Click the Add NFS Secondary Staging Store button.</li>
<li>Fill out the dialog box fields, then click OK:<ul>
<li>Zone. The zone where the NFS Secondary Staging Store is to be
located.</li>
<li>NFS server. The name of the zone’s Secondary Staging Store.</li>
<li>Path. The path to the zone’s Secondary Staging Store.</li>
</ul>
</li>
</ol>
</div>
</div>
<div class="section" id="initialize-and-test">
<span id="id11"></span><h2>Initialize and Test<a class="headerlink" href="configuration.html#initialize-and-test" title="Permalink to this headline">¶</a></h2>
<p>After everything is configured, CloudStack will perform its
initialization. This can take 30 minutes or more, depending on the speed
of your network. When the initialization has completed successfully, the
administrator’s Dashboard should be displayed in the CloudStack UI.</p>
<ol class="arabic">
<li><p class="first">Verify that the system is ready. In the left navigation bar, select
Templates. Click on the CentOS 5.5 (64bit) no Gui (KVM) template.
Check to be sure that the status is “Download Complete.” Do not
proceed to the next step until this status is displayed.</p>
</li>
<li><p class="first">Go to the Instances tab, and filter by My Instances.</p>
</li>
<li><p class="first">Click Add Instance and follow the steps in the wizard.</p>
<ol class="arabic simple">
<li>Choose the zone you just added.</li>
<li>In the template selection, choose the template to use in the VM.
If this is a fresh installation, likely only the provided CentOS
template is available.</li>
<li>Select a service offering. Be sure that the hardware you have
allows starting the selected service offering.</li>
<li>In data disk offering, if desired, add another data disk. This is
a second volume that will be available to but not mounted in the
guest. For example, in Linux on XenServer you will see /dev/xvdb
in the guest after rebooting the VM. A reboot is not required if
you have a PV-enabled OS kernel in use.</li>
<li>In default network, choose the primary network for the guest. In a
trial installation, you would have only one option here.</li>
<li>Optionally give your VM a name and a group. Use any descriptive
text you would like.</li>
<li>Click Launch VM. Your VM will be created and started. It might
take some time to download the template and complete the VM
startup. You can watch the VMâ€™s progress in the Instances
screen.</li>
</ol>
</li>
<li><p class="first">To use the VM, click the View Console button. <img alt="ConsoleButton.png: button to launch a console" src="../_images/console-icon.png" /></p>
<p>For more information about using VMs, including instructions for how
to allow incoming network traffic to the VM, start, stop, and delete
VMs, and move a VM from one host to another, see Working With Virtual
Machines in the Administratorâ€™s Guide.</p>
</li>
</ol>
<p>Congratulations! You have successfully completed a CloudStack
Installation.</p>
<p>If you decide to grow your deployment, you can add more hosts, primary
storage, zones, pods, and clusters.</p>
</div>
<div class="section" id="configuration-parameters">
<span id="id12"></span><h2>Configuration Parameters<a class="headerlink" href="configuration.html#configuration-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="about-configuration-parameters">
<h3>About Configuration Parameters<a class="headerlink" href="configuration.html#about-configuration-parameters" title="Permalink to this headline">¶</a></h3>
<p>CloudStack provides a variety of settings you can use to set limits,
configure features, and enable or disable features in the cloud. Once
your Management Server is running, you might need to set some of these
configuration parameters, depending on what optional features you are
setting up. You can set default values at the global level, which will
be in effect throughout the cloud unless you override them at a lower
level. You can make local settings, which will override the global
configuration parameter values, at the level of an account, zone,
cluster, or primary storage.</p>
<p>The documentation for each CloudStack feature should direct you to the
names of the applicable parameters. The following table shows a few of
the more useful parameters.</p>
<table border="1" class="table-striped table-bordered table-hover docutils">
<colgroup>
<col width="4%" />
<col width="96%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>management.network.cidr</td>
<td>A CIDR that describes the network that the management CIDRs reside on. This                                        variable must be set for deployments that use vSphere. It is recommended to be                                     set for other deployments as well. Example: 192.168.3.0/24.</td>
</tr>
<tr class="row-odd"><td>xen.setup.multipath</td>
<td>For XenServer nodes, this is a true/false variable that instructs CloudStack to                                    enable iSCSI multipath on the XenServer Hosts when they are added. This                                            defaults to false. Set it to true if you would like CloudStack to enable                                           multipath.If this is true for a NFS-based deployment multipath will still be                                       enabled on the XenServer host. However, this does not impact NFS operation and                                     is harmless.</td>
</tr>
<tr class="row-even"><td>secstorage.allowed.internal.sites</td>
<td>This is used to protect your internal network from rogue attempts to download                                      arbitrary files using the template download feature. This is a comma-separated                                     list of CIDRs. If a requested URL matches any of these CIDRs the Secondary                                         Storage VM will use the private network interface to fetch the URL. Other URLs                                     will go through the public interface. We suggest you set this to 1 or 2                                            hardened internal machines where you keep your templates. For example, set it                                      to 192.168.1.66/32.</td>
</tr>
<tr class="row-odd"><td>use.local.storage</td>
<td>Determines whether CloudStack will use storage that is local to the Host for                                       data disks, templates, and snapshots. By default CloudStack will not use this                                      storage. You should change this to true if you want to use local storage and                                       you understand the reliability and feature drawbacks to choosing local storage.</td>
</tr>
<tr class="row-even"><td>host</td>
<td>This is the IP address of the Management Server. If you are using multiple                                         Management Servers you should enter a load balanced IP address that is                                             reachable via the private network.</td>
</tr>
<tr class="row-odd"><td>default.page.size</td>
<td>Maximum number of items per page that can be returned by a CloudStack API                                          command. The limit applies at the cloud level and can vary from cloud to cloud.                                    You can override this with a lower value on a particular API call by using the                                     page and pagesize API command parameters. For more information, see the                                            Developer’s Guide. Default: 500.</td>
</tr>
<tr class="row-even"><td>ha.tag</td>
<td>The label you want to use throughout the cloud to designate certain hosts as                                       dedicated HA hosts. These hosts will be used only for HA-enabled VMs that are                                      restarting due to the failure of another host. For example, you could set this                                     to ha_host. Specify the ha.tag value asa host tag when you add a new host to                                      the cloud.</td>
</tr>
<tr class="row-odd"><td>vmware.vcenter.session.timeout</td>
<td>Determines the vCenter session timeout value by using this parameter. The                                          default value is 20 minutes. Increase the timeout value to avoid timeout errors                                    in VMware deployments because certain VMware operations take more than 20                                          minutes.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="setting-global-configuration-parameters">
<h3>Setting Global Configuration Parameters<a class="headerlink" href="configuration.html#setting-global-configuration-parameters" title="Permalink to this headline">¶</a></h3>
<p>Use the following steps to set global configuration parameters. These
values will be the defaults in effect throughout your CloudStack
deployment.</p>
<ol class="arabic simple">
<li>Log in to the UI as administrator.</li>
<li>In the left navigation bar, click Global Settings.</li>
<li>In Select View, choose one of the following:<ul>
<li>Global Settings. This displays a list of the parameters with brief
descriptions and current values.</li>
<li>Hypervisor Capabilities. This displays a list of hypervisor
versions with the maximum number of guests supported for each.</li>
</ul>
</li>
<li>Use the search box to narrow down the list to those you are
interested in.</li>
<li>In the Actions column, click the Edit icon to modify a value. If you
are viewing Hypervisor Capabilities, you must click the name of the
hypervisor first to display the editing screen.</li>
</ol>
</div>
<div class="section" id="setting-local-configuration-parameters">
<h3>Setting Local Configuration Parameters<a class="headerlink" href="configuration.html#setting-local-configuration-parameters" title="Permalink to this headline">¶</a></h3>
<p>Use the following steps to set local configuration parameters for an
account, zone, cluster, or primary storage. These values will override
the global configuration settings.</p>
<ol class="arabic simple">
<li>Log in to the UI as administrator.</li>
<li>In the left navigation bar, click Infrastructure or Accounts,
depending on where you want to set a value.</li>
<li>Find the name of the particular resource that you want to work with.
For example, if you are in Infrastructure, click View All on the
Zones, Clusters, or Primary Storage area.</li>
<li>Click the name of the resource where you want to set a limit.</li>
<li>Click the Settings tab.</li>
<li>Use the search box to narrow down the list to those you are
interested in.</li>
<li>In the Actions column, click the Edit icon to modify a value.</li>
</ol>
</div>
</div>
<div class="section" id="granular-global-configuration-parameters">
<h2>Granular Global Configuration Parameters<a class="headerlink" href="configuration.html#granular-global-configuration-parameters" title="Permalink to this headline">¶</a></h2>
<p>The following global configuration parameters have been made more
granular. The parameters are listed under three different scopes:
account, cluster, and zone.</p>
<table border="1" class="table-striped table-bordered table-hover docutils">
<colgroup>
<col width="2%" />
<col width="15%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Field</th>
<th class="head">Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>account</td>
<td>remote.access.vpn.client.iprange</td>
<td>The range of IPs to be allocated to remotely access the VPN clients. The first IP in the range is                                                                                                          used by the VPN server.</td>
</tr>
<tr class="row-odd"><td>account</td>
<td>allow.public.user.templates</td>
<td>If false, users will not be able to create public templates.</td>
</tr>
<tr class="row-even"><td>account</td>
<td>use.system.public.ips</td>
<td>If true and if an account has one or more dedicated public IP ranges, IPs are                                                                                                                              acquired from the system pool after all the IPs dedicated to the account have been consumed.</td>
</tr>
<tr class="row-odd"><td>account</td>
<td>use.system.guest.vlans</td>
<td>If true and if an account has one or more dedicated guest VLAN ranges, VLANs are allocated from the                                                                                                        system pool after all the VLANs dedicated to the account have been consumed.</td>
</tr>
<tr class="row-even"><td>cluster</td>
<td>cluster.storage.allocated.capacity.notificationthreshold</td>
<td>The percentage, as a value between 0 and 1, of allocated storage utilization                                                                                                                               above which alerts are sent that the storage is below the threshold.</td>
</tr>
<tr class="row-odd"><td>cluster</td>
<td>cluster.storage.capacity.notificationthreshold</td>
<td>The percentage, as a value between 0 and 1, of storage utilization above which alerts are sent that the available storage is below                                                                         the threshold.</td>
</tr>
<tr class="row-even"><td>cluster</td>
<td>cluster.cpu.allocated.capacity.notificationthreshold</td>
<td>The percentage, as a value between 0 and 1, of cpu utilization above which alerts are sent that the available CPU is below the                                                                             threshold.</td>
</tr>
<tr class="row-odd"><td>cluster</td>
<td>cluster.memory.allocated.capacity.notificationthreshold</td>
<td>The percentage, as a value between 0 and 1, of memory utilization above which alerts are sent that the available memory is below the                                                                       threshold.</td>
</tr>
<tr class="row-even"><td>cluster</td>
<td>cluster.cpu.allocated.capacity.disablethreshold</td>
<td>The percentage, as a value between 0 and 1, of CPU utilization above which allocators will disable that cluster from further usage.                                                                        Keep the corresponding notification threshold lower than this value to be notified beforehand.</td>
</tr>
<tr class="row-odd"><td>cluster</td>
<td>cluster.memory.allocated.capacity.disablethreshold</td>
<td>The percentage, as a value between 0 and 1, of memory utilization above which allocators will disable that cluster from further                                                                            usage. Keep the corresponding notification threshold lower than this value to be notified beforehand.</td>
</tr>
<tr class="row-even"><td>cluster</td>
<td>cpu.overprovisioning.factor</td>
<td>Used for CPU over-provisioning calculation; the available CPU will be
the mathematical product of actualCpuCapacity and cpu.overprovisioning.factor.</td>
</tr>
<tr class="row-odd"><td>cluster</td>
<td>mem.overprovisioning.factor</td>
<td>Used for memory over-provisioning calculation.</td>
</tr>
<tr class="row-even"><td>cluster</td>
<td>vmware.reserve.cpu</td>
<td>Specify whether or not to reserve CPU when not over-provisioning; In case of CPU over-provisioning, CPU is always reserved.</td>
</tr>
<tr class="row-odd"><td>cluster</td>
<td>vmware.reserve.mem</td>
<td>Specify whether or not to reserve memory when not over-provisioning; In case of memory over-provisioning memory is always reserved.</td>
</tr>
<tr class="row-even"><td>zone</td>
<td>pool.storage.allocated.capacity.disablethreshold</td>
<td>The percentage, as a value between 0 and 1, of allocated storage utilization above which allocators will disable that pool because the
available allocated storage is below the threshold.</td>
</tr>
<tr class="row-odd"><td>zone</td>
<td>pool.storage.capacity.disablethreshold</td>
<td>The percentage, as a value between 0 and 1, of storage utilization above which allocators will disable the pool because the available                                                                      storage capacity is below the threshold.</td>
</tr>
<tr class="row-even"><td>zone</td>
<td>storage.overprovisioning.factor</td>
<td>Used for storage over-provisioning calculation; available storage will be the mathematical product of actualStorageSize and                                                                                storage.overprovisioning.factor.</td>
</tr>
<tr class="row-odd"><td>zone</td>
<td>network.throttling.rate</td>
<td>Default data transfer rate in megabits per second allowed in a network.</td>
</tr>
<tr class="row-even"><td>zone</td>
<td>guest.domain.suffix</td>
<td>Default domain name for VMs inside a virtual networks with a router.</td>
</tr>
<tr class="row-odd"><td>zone</td>
<td>router.template.xen</td>
<td>Name of the default router template on Xenserver.</td>
</tr>
<tr class="row-even"><td>zone</td>
<td>router.template.kvm</td>
<td>Name of the default router template on KVM.</td>
</tr>
<tr class="row-odd"><td>zone</td>
<td>router.template.vmware</td>
<td>Name of the default router template on VMware.</td>
</tr>
<tr class="row-even"><td>zone</td>
<td>enable.dynamic.scale.vm</td>
<td>Enable or diable dynamically scaling of a VM.</td>
</tr>
<tr class="row-odd"><td>zone</td>
<td>use.external.dns</td>
<td>Bypass internal DNS, and use the external DNS1 and DNS2</td>
</tr>
<tr class="row-even"><td>zone</td>
<td>blacklisted.routes</td>
<td>Routes that are blacklisted cannot be used for creating static routes for a VPC Private Gateway.</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="hypervisor/hyperv.html" class="btn btn-neutral float-right" title="Host Hyper-V Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="management-server/index.html" class="btn btn-neutral float-left" title="Management Server Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Apache Foundation
      
        <span class="commit">
          Revision <code>29a3d9e2</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="http://docs.cloudstack.apache.org/en/master/">master</a></dd>
        
          <dd><a href="../../../index.html">latest</a></dd>
        
          <dd><a href="../../4.13.0.0/index.html">4.13.0.0</a></dd>
        
          <dd><a href="../../4.12.0.0/index.html">4.12.0.0</a></dd>
        
          <dd><a href="../../4.11.3.0/index.html">4.11.3.0</a></dd>
        
          <dd><a href="../../4.11.2.0/index.html">4.11.2.0</a></dd>
        
          <dd><a href="../../4.11.1.0/index.html">4.11.1.0</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
          <dd><a href="http://readthedocs.org/projects/cloudstack-documentation/downloads/htmlzip/latest/">html</a></dd>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/cloudstack-documentation/?fromdocs=cloudstack-documentation">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/cloudstack-documentation/?fromdocs=cloudstack-documentation">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>