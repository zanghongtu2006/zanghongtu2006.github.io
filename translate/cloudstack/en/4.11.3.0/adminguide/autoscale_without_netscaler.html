

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuring AutoScale without using NetScaler &mdash; Apache CloudStack 4.11.3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="虚拟机" href="virtual_machines.html" />
    <link rel="prev" title="设置用户网络概述" href="networking.html" /> 

<!-- RTD Extra Head -->

<!-- 
Always link to the latest version, as canonical.
http://docs.readthedocs.org/en/latest/canonical.html
-->
<link rel="canonical" href="../../latest/adminguide/autoscale_without_netscaler.html" />

<link rel="stylesheet" href="https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="text/javascript" src="../_static/readthedocs-data.js"></script>

<!-- Add page-specific data, which must exist in the page js, not global -->
<script type="text/javascript">
READTHEDOCS_DATA['page'] = "adminguide/autoscale_without_netscaler"
READTHEDOCS_DATA['source_suffix'] = ".rst"
</script>

<script type="text/javascript" src="https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js"></script>

<!-- end RTD <extrahead> -->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Apache CloudStack
          

          
          </a>

          
            
            
            
              <div class="version">
                4.11.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../conceptsandterminology/index.html">CloudStack 概念和术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickinstallationguide/qig.html">快速安装向导</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installguide/index.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading/index.html">升级 CloudStack</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">使用手册</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#user-interface">用户界面</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#managing-accounts-users-and-domains">账户、用户和域</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-projects-to-organize-user-resources">用项目来管理用户资源</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#service-offerings">计算方案</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#setting-up-networking-for-users">设置用户网络</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="networking.html">设置用户网络概述</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking.html#about-virtual-networks">关于虚拟网络</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking.html#network-service-providers">Network Service Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="networking.html#network-offerings">网络方案</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="autoscale_without_netscaler.html#">Configuring AutoScale without using NetScaler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="autoscale_without_netscaler.html#what-is-autoscaling">What is AutoScaling?</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoscale_without_netscaler.html#hypervisor-support">Hypervisor support</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoscale_without_netscaler.html#prerequisites">前提</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoscale_without_netscaler.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoscale_without_netscaler.html#disabling-and-enabling-an-autoscale-configuration">Disabling and Enabling an AutoScale Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoscale_without_netscaler.html#updating-an-autoscale-configuration">Updating an AutoScale Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="autoscale_without_netscaler.html#runtime-considerations">Runtime Considerations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#working-with-virtual-machines">虚拟机</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#working-with-templates">模板</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#working-with-hosts">主机</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#working-with-storage">存储</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#working-with-system-virtual-machines">系统虚拟机</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#working-with-usage">Working with Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#managing-networks-and-traffic">Managing Networks and Traffic</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#managing-the-cloud">管理云</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#system-reliability-and-availability">系统的可靠性和可用性</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tuning">调优</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#events-and-troubleshooting">Events and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developersguide/index.html">开发者手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">插件使用手册</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">发行版本说明</a></li>
</ul>
<p class="caption"><span class="caption-text">其它:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://cloudstack.apache.org/api.html">API 文档</a></li>
<li class="toctree-l1"><a class="reference external" href="https://cwiki.apache.org/confluence/display/CLOUDSTACK/Home">Apache CloudStack Wiki</a></li>
<li class="toctree-l1"><a class="reference external" href="http://cloudstack.apache.org/">Apache CloudStack web site</a></li>
<li class="toctree-l1"><a class="reference external" href="http://cloudstack.apache.org/downloads.html">Apache CloudStack Source Code</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apache/cloudstack">Apache CloudStack on GitHub</a></li>
</ul>
<p class="caption"><span class="caption-text">Pre 4.11 Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="../../../projects/cloudstack-installation.html">安装指南</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../projects/cloudstack-administration.html">管理员手册</a></li>
<li class="toctree-l1"><a class="reference external" href="../../../projects/cloudstack-release-notes.html">发行版本说明</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Apache CloudStack</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">使用手册</a> &raquo;</li>
        
      <li>Configuring AutoScale without using NetScaler</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/apache/cloudstack-documentation/blob/4.11.3.0/source/adminguide/autoscale_without_netscaler.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuring-autoscale-without-using-netscaler">
<h1>Configuring AutoScale without using NetScaler<a class="headerlink" href="autoscale_without_netscaler.html#configuring-autoscale-without-using-netscaler" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This feature is currently only available on the master branch and will be
released in the 4.4 release.</p>
</div>
<div class="section" id="what-is-autoscaling">
<h2>What is AutoScaling?<a class="headerlink" href="autoscale_without_netscaler.html#what-is-autoscaling" title="Permalink to this headline">¶</a></h2>
<p>AutoScaling allows you to scale your back-end services or application VMs up
or down seamlessly and automatically according to the conditions you define.
With AutoScaling enabled, you can ensure that the number of VMs you are using
seamlessly scale up when demand increases, and automatically decreases when
demand subsides. Thus it helps you save compute costs by terminating underused
VMs automatically and launching new VMs when you need them, without the need
for manual intervention.</p>
</div>
<div class="section" id="hypervisor-support">
<h2>Hypervisor support<a class="headerlink" href="autoscale_without_netscaler.html#hypervisor-support" title="Permalink to this headline">¶</a></h2>
<p>At that time, AutoScaling without NetScaler only supports for Xenserver. We
are working to support KVM also.</p>
</div>
<div class="section" id="prerequisites">
<h2>前提<a class="headerlink" href="autoscale_without_netscaler.html#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Before you configure an AutoScale rule, consider the following:</p>
<ul class="simple">
<li>Ensure that the necessary template is prepared before configuring AutoScale.
Firstly you must install the PV-driver, which helps Xenserver collect
performance parameters (CPU and memory) into VMs. Beside, When a VM is
deployed by using a template and when it comes up, the application should be
up and running.</li>
</ul>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="autoscale_without_netscaler.html#configuration" title="Permalink to this headline">¶</a></h2>
<p>Specify the following:</p>
<img alt="../_images/autoscale-config.png" src="../_images/autoscale-config.png" />
<ul>
<li><p class="first">Template: A template consists of a base OS image and application. A
template is used to provision the new instance of an application on a
scaleup action. When a VM is deployed from a template, the VM can start
taking the traffic from the load balancer without any admin intervention.
For example, if the VM is deployed for a Web service, it should have the
Web server running, the database connected, and so on.</p>
</li>
<li><p class="first">Compute offering: A predefined set of virtual hardware attributes,
including CPU speed, number of CPUs, and RAM size, that the user can select
when creating a new virtual machine instance. Choose one of the compute
offerings to be used while provisioning a VM instance as part of scaleup
action.</p>
</li>
<li><p class="first">Min Instance: The minimum number of active VM instances that is assigned to
a load balancing rule. The active VM instances are the application
instances that are up and serving the traffic, and are being load balanced.
This parameter ensures that a load balancing rule has at least the
configured number of active VM instances are available to serve the traffic.</p>
</li>
<li><p class="first">Max Instance: Maximum number of active VM instances that should be assigned
to a load balancing rule. This parameter defines the upper limit of active
VM instances that can be assigned to a load balancing rule.</p>
<p>Specifying a large value for the maximum instance parameter might result in
provisioning large number of VM instances, which in turn leads to a single
load balancing rule exhausting the VM instances limit specified at the
account or domain level.</p>
</li>
</ul>
<p>Specify the following scale-up and scale-down policies:</p>
<ul>
<li><p class="first">Duration: The duration, in seconds, for which the conditions you specify
must be true to trigger a scaleup action. The conditions defined should
hold true for the entire duration you specify for an AutoScale action to be
invoked.</p>
</li>
<li><p class="first">Counter: The performance counters expose the state of the monitored
instances. We added two new counter to work with that feature:</p>
<ul class="simple">
<li>Linux User CPU [native] - percentage</li>
<li>Linux User RAM [native] - percentage</li>
</ul>
<p>Remember to choose one of them. If you choose anything else, the
autoscaling will not work.</p>
</li>
<li><p class="first">Operator: The following five relational operators are supported in
AutoScale feature: Greater than, Less than, Less than or equal to, Greater
than or equal to, and Equal to.</p>
</li>
<li><p class="first">Threshold: Threshold value to be used for the counter. Once the counter
defined above breaches the threshold value, the AutoScale feature initiates
a scaleup or scaledown action.</p>
</li>
<li><p class="first">Add: Click Add to add the condition.</p>
<p>Additionally, if you want to configure the advanced settings, click Show
advanced settings, and specify the following:</p>
</li>
<li><p class="first">Polling interval: Frequency in which the conditions, combination of counter,
operator and threshold, are to be evaluated before taking a scale up or
down action. The default polling interval is 30 seconds.</p>
</li>
<li><p class="first">Quiet Time: This is the cool down period after an AutoScale action is
initiated. The time includes the time taken to complete provisioning a VM
instance from its template and the time taken by an application to be ready
to serve traffic. This quiet time allows the fleet to come up to a stable
state before any action can take place. The default is 300 seconds.</p>
</li>
<li><p class="first">Destroy VM Grace Period: The duration in seconds, after a scaledown action
is initiated, to wait before the VM is destroyed as part of scaledown
action. This is to ensure graceful close of any pending sessions or
transactions being served by the VM marked for destroy. The default is 120
seconds.</p>
</li>
<li><p class="first">Apply: Click Apply to create the AutoScale configuration.</p>
</li>
</ul>
</div>
<div class="section" id="disabling-and-enabling-an-autoscale-configuration">
<h2>Disabling and Enabling an AutoScale Configuration<a class="headerlink" href="autoscale_without_netscaler.html#disabling-and-enabling-an-autoscale-configuration" title="Permalink to this headline">¶</a></h2>
<p>If you want to perform any maintenance operation on the AutoScale VM instances,
disable the AutoScale configuration. When the AutoScale configuration is
disabled, no scaleup or scaledown action is performed. You can use this
downtime for the maintenance activities. To disable the AutoScale
configuration, click the Disable AutoScale button.</p>
<p>The button toggles between enable and disable, depending on whether AutoScale
is currently enabled or not. After the maintenance operations are done, you
can enable the AutoScale configuration back. To enable, open the AutoScale
configuration page again, then click the Enable AutoScale button.</p>
</div>
<div class="section" id="updating-an-autoscale-configuration">
<h2>Updating an AutoScale Configuration<a class="headerlink" href="autoscale_without_netscaler.html#updating-an-autoscale-configuration" title="Permalink to this headline">¶</a></h2>
<p>You can update the various parameters and add or delete the conditions in a
scaleup or scaledown rule. Before you update an AutoScale configuration,
ensure that you disable the AutoScale load balancer rule by clicking the
Disable AutoScale button.</p>
<p>After you modify the required AutoScale parameters, click Apply. To apply the
new AutoScale policies, open the AutoScale configuration page again, then
click the Enable AutoScale button.</p>
</div>
<div class="section" id="runtime-considerations">
<h2>Runtime Considerations<a class="headerlink" href="autoscale_without_netscaler.html#runtime-considerations" title="Permalink to this headline">¶</a></h2>
<p>An administrator should not assign a VM to a load balancing rule which is
configured for AutoScale.</p>
<p>Making API calls outside the context of AutoScale, such as destroyVM, on an
autoscaled VM leaves the load balancing configuration in an inconsistent state.
Though VM is destroyed from the load balancer rule, it continues be showed as
a service assigned to a rule inside the context of AutoScale.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="virtual_machines.html" class="btn btn-neutral float-right" title="虚拟机" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="networking.html" class="btn btn-neutral float-left" title="设置用户网络概述" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Apache Foundation
      
        <span class="commit">
          Revision <code>7c5c9b49</code>.
        </span>
      

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: 4.11.3.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Versions</dt>
        
          <dd><a href="../../../index.html">latest</a></dd>
        
          <dd><a href="../../4.12.0.0/index.html">4.12.0.0</a></dd>
        
          <dd><a href="../index.html">4.11.3.0</a></dd>
        
          <dd><a href="../../4.11.2.0/index.html">4.11.2.0</a></dd>
        
          <dd><a href="../../4.11.1.0/index.html">4.11.1.0</a></dd>
        
          <dd><a href="http://docs.cloudstack.apache.org/en/master/">master</a></dd>
        
      </dl>
      <dl>
        <dt>Downloads</dt>
        
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="http://readthedocs.org/projects/cloudstack-documentation/?fromdocs=cloudstack-documentation">Project Home</a>
          </dd>
          <dd>
            <a href="http://readthedocs.org/builds/cloudstack-documentation/?fromdocs=cloudstack-documentation">Builds</a>
          </dd>
      </dl>
      <hr/>
      Free document hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.

    </div>
  </div>



  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
   

</body>
</html>